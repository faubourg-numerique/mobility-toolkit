<query-editor-row query-ctrl="ctrl" class="generic-datasource-query-row" has-text-edit-mode="true">
  <div>
    <div class="gf-form max-width-8">
      <select class="gf-form-input" ng-model="ctrl.target.type" ng-options="f as f for f in ['table', 'timeserie','geometry table', 'geometry timeserie']"
        ng-change="ctrl.onChangeInternal()"></select>
    </div>
    
    <div ng-if="ctrl.target.type == 'timeserie' || ctrl.target.type == 'geometry timeserie'" class="gf-form-inline">
      <label class="gf-form-label query-keyword width-6">Country Key</label>
      <div class="gf-form">
        <input class="gf-form-input" rows="5" ng-model="ctrl.target.countryKey" placeholder="Enter Country Key"
        ng-blur="ctrl.onChangeCountryKey()"/>
      </div>
    </div>

    <div class="gf-form" ng-if="ctrl.target.rawQuery">
      <textarea class="gf-form-input" rows="5" ng-model="ctrl.target.target" placeholder="Enter Query API" spellcheck="false"
        ng-blur="ctrl.onChangeInternal()"></textarea>
    </div>
  </div>
  <div ng-if="!ctrl.target.rawQuery">
    <div class="gf-form-inline">
      <label class="gf-form-label query-keyword width-6">Entity Type</label>
      <div class="gf-form">
        <gf-form-dropdown model="ctrl.entityTypeSegment" allow-custom="true" lookup-text="true" 
          get-options="ctrl.getEntityTypes()" on-change="ctrl.typesChanged()">
        </gf-form-dropdown>
      </div>
    </div>
    <div class="gf-form-inline">
      <label class="gf-form-label query-keyword width-6">Entity Ids</label>
      <div class="gf-form">
        <gf-form-dropdown model="ctrl.entityIdSegment" allow-custom="true" lookup-text="true"
          get-options="ctrl.getEntityIds()" on-change="ctrl.idsChanged()">
        </gf-form-dropdown>
      </div>
    </div>
  
    <div class="gf-form-inline">
      <label class="gf-form-label query-keyword width-16">Additional Query Parameters (lead with a '&')</label>
      <div class="gf-form">
        <input type="text" class="gf-form-input width-24" ng-model="ctrl.target.additionalparams"
          ng-change="ctrl.onChangeInternal()" ng-model-onblur>
      </div>
    </div>
    <div class="gf-form-inline">
      <div class="gf-form">
        <span class="gf-form-label query-keyword width-8">Link for @Context</span>
        <input type="text" class="gf-form-input" ng-model="ctrl.target.atcontext" ng-change="ctrl.onChangeInternal()"
          ng-blur="ctrl.onChangeInternal()"></input>
      </div>
    </div>
	
	<div class="gf-form-inline">
      <label class="gf-form-label query-keyword width-20">Grid value setting</label>
      <select class="gf-form-input" ng-model="ctrl.gridValueSegment" ng-options="f as f for f in ['average', 'min','max']"
        ng-change="ctrl.gridChanged()"></select>
    </div>
	<div class="gf-form-inline">
      <div class="gf-form">
        <span class="gf-form-label query-keyword width-8">Metric field</span>
        <input type="text" class="gf-form-input" ng-model="ctrl.target.metric" ng-change="ctrl.onChangeInternal()"
          ng-blur="ctrl.onChangeInternal()"></input>
      </div>
    </div>
  </div>


</query-editor-row>
</query-editor-row>